inc ./lib/stdlib.slm

proc inputfd 0 1
  var 8

  ret
end

proc inputbuffer 0 1
  var 129
  
  ret
end

proc main 0 0
  0
  do
    1 +
    copy (args)
    0 swap 0 swap
    -100
    (open)
    (inputfd) swap put disc
    do
      127
      (inputbuffer) (str.clear)
      (inputfd) read (read)
      (inputbuffer) (str.print)
      0 !=
    end
    (inputfd) read (close)
  end
  ret
end

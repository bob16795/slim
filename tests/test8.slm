inc lib/inet.slm

const PORT 6969

const CBUFSIZE 10000
gvar cbuf 10000
gvar cbuflen 8

gvar inet 52

proc main 0 0
  inet

  PORT (net.open)

  do
    (net.poll)

    CBUFSIZE cbuf (net.read)
    cbuflen swap put disc
    
    "Got connection" (cstr.println)

    "HTTP/1.1 200 OK\r\n" (net.write)
    "Server: SlimHTTPD\r\n" (net.write)
    "Content-Type: text/html\r\n" (net.write)
    "Conection: Closed\r\n" (net.write)
    "\r\n" (net.write)
    "<h1>Hello, World!</h1>\n" (net.write)

    (net.finish)

    1
  end
  disc

  ret
end

